<?phpnamespace App\Redis;/** * Created by PhpStorm. * User: yanrong * Date: 2017/7/27 * Time: 上午11:49 */use App\Redis\Redis;class WechatRedis{    protected $database = 5;//默认数据库2    protected $connectSchema = 'default';    public $redis;    public function __construct(Redis $redis)    {        $this->redis = $redis;    }    /**     * 保存微信授权回调url 解决state 128字节长度的问题     */    public function saveWechatAuthRedirctUrl($url)    {        $baseKey = $this->getWechatAuthRedirectUrlBaseKey();        $md5url  = md5($url);        $this->hmset($baseKey, [$md5url => $url]);    }    /**     * @param $url     * @return string     */    public function getWechatAuthRedirectUrl($key)    {        $baseKey = $this->getWechatAuthRedirectUrlBaseKey();        $valus   = $this->hmget($baseKey, [$key]);        return array_first($valus);    }    private function getWechatAuthRedirectUrlBaseKey()    {        return 'wechat:auth:redircturl';    }}